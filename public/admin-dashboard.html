<!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø§Ø¯Ù…Ù†</title>
  <style>
    /* Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù„Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ */
    :root {
      --primary: #007bff;
      --primary-dark: #0056b3;
      --secondary: #6c757d;
      --success: #28a745;
      --danger: #dc3545;
      --dark-bg: #121212;
      --dark-card: #1e1e1e;
      --dark-border: #333333;
      --dark-text: #f1f1f1;
      --dark-text-secondary: #b0b0b0;
      --shadow-color: rgba(0, 0, 0, 0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: background-color 0.3s, transform 0.3s;
    }

    body {
      font-family: "Segoe UI", "Noto Sans Arabic", Tahoma, Geneva, Verdana, sans-serif;
      direction: rtl;
      background: linear-gradient(135deg, var(--dark-bg) 0%, #1a1a2e 100%);
      color: var(--dark-text);
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
      perspective: 1000px;
    }

    /* ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„ØµÙØ­Ø© */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding: 20px;
      background: var(--dark-card);
      border-radius: 15px;
      box-shadow: 0 10px 30px var(--shadow-color);
      transform-style: preserve-3d;
      animation: floatIn 0.8s ease-out;
    }

    h1 {
      text-align: center;
      color: var(--dark-text);
      font-size: 1.8rem;
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      position: relative;
    }

    h1::after {
      content: '';
      position: absolute;
      bottom: -8px;
      right: 0;
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--primary), transparent);
      border-radius: 3px;
    }

    h2 {
      margin-bottom: 20px;
      color: var(--dark-text);
      padding-bottom: 10px;
      border-bottom: 2px solid var(--primary);
      font-size: 1.4rem;
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    button {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      position: relative;
      overflow: hidden;
    }

    button::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(100%);
      transition: transform 0.6s;
    }

    button:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 123, 255, 0.5);
    }

    button:hover::before {
      transform: translateX(0);
    }

    button:active {
      transform: translateY(-2px) scale(1.02);
    }

    #logoutBtn {
      background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);
      box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
    }

    #logoutBtn:hover {
      box-shadow: 0 8px 25px rgba(220, 53, 69, 0.5);
    }

    /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: var(--dark-card);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 25px var(--shadow-color);
      transform-style: preserve-3d;
      animation: slideUp 0.5s ease-out;
    }

    th,
    td {
      border-bottom: 1px solid var(--dark-border);
      padding: 15px 12px;
      text-align: center;
    }

    th {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      font-weight: 600;
      position: relative;
    }

    th::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 3px;
      background: rgba(255, 255, 255, 0.2);
    }

    tbody tr {
      transition: all 0.3s;
    }

    tbody tr:hover {
      background-color: rgba(255, 255, 255, 0.05);
      transform: translateX(-5px);
    }

    /* Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
    .content-section {
      background: var(--dark-card);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px var(--shadow-color);
      transform-style: preserve-3d;
      animation: floatIn 0.8s ease-out 0.2s both;
    }

    /* Ù‚Ø³Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
    #messages {
      margin-top: 40px;
    }

    textarea,
    input[type="email"] {
      width: 100%;
      padding: 15px;
      margin-top: 10px;
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid var(--dark-border);
      border-radius: 8px;
      color: var(--dark-text);
      font-size: 1em;
      font-family: inherit;
      transition: all 0.3s;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    textarea:focus,
    input[type="email"]:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
      background: rgba(255, 255, 255, 0.1);
    }

    textarea::placeholder,
    input[type="email"]::placeholder {
      color: var(--dark-text-secondary);
    }

    /* Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª */
    .response {
      margin-top: 15px;
      font-weight: bold;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      animation: fadeIn 0.5s;
    }

    .success {
      background: rgba(40, 167, 69, 0.15);
      color: #28a745;
      border-right: 4px solid #28a745;
    }

    .error {
      background: rgba(220, 53, 69, 0.15);
      color: #dc3545;
      border-right: 4px solid #dc3545;
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ */
    .card-3d {
      transform-style: preserve-3d;
      transform: rotateY(0deg);
      transition: transform 0.5s;
    }

    .card-3d:hover {
      transform: rotateY(5deg) translateY(-5px);
    }

    /* Ø§Ù„Ø²Ø± Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø­Ø°Ù */
    table button {
      padding: 8px 15px;
      background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);
      box-shadow: 0 3px 10px rgba(220, 53, 69, 0.3);
    }

    table button:hover {
      box-shadow: 0 5px 15px rgba(220, 53, 69, 0.5);
    }

    /* Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
    @keyframes floatIn {
      0% {
        opacity: 0;
        transform: translateY(20px) rotateX(10deg);
      }
      100% {
        opacity: 1;
        transform: translateY(0) rotateX(0);
      }
    }

    @keyframes slideUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

    /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      h1 {
        font-size: 1.5rem;
      }

      h2 {
        font-size: 1.2rem;
      }

      table {
        display: block;
        overflow-x: auto;
      }

      th, td {
        padding: 10px 8px;
        font-size: 0.9rem;
      }

      button {
        padding: 10px 18px;
        font-size: 0.9rem;
      }

      .content-section {
        padding: 15px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }

      h1 {
        font-size: 1.3rem;
      }

      h2 {
        font-size: 1.1rem;
      }

      th, td {
        padding: 8px 5px;
        font-size: 0.85rem;
      }

      button {
        padding: 8px 15px;
        font-size: 0.85rem;
      }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(0, 123, 255, 0);
      }
    }

    /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .loader {
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <div class="header card-3d">
    <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø§Ø¯Ù…Ù†</h1>
    <button id="logoutBtn" class="pulse">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  </div>

  <div class="content-section card-3d">
    <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø±Ø³Ù„Ø©</h2>
    <table id="usersTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ø§Ø³Ù…</th>
          <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
          <th>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</th>
          <th>Ø­Ø°Ù</th>
        </tr>
      </thead>
      <tbody>
        <!-- Ù‡Ù†Ø§ ØªØ¸Ù‡Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
        <tr>
          <td colspan="5" style="text-align: center;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="content-section card-3d" id="messages">
    <h2>Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù…Ø³ØªØ®Ø¯Ù…</h2>

    <label for="emailInput">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label><br />
    <input type="email" id="emailInput" placeholder="example@domain.com" required /><br /><br />

    <label for="messageInput">Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</label><br />
    <textarea id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." required></textarea><br /><br />

    <button id="sendMessageBtn">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©</button>

    <p id="sendResponse" class="response"></p>
  </div>

  <div class="content-section card-3d" id="sentMessages">
    <h2>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</h2>
    <table id="sentMessagesTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
          <th>Ø§Ù„Ø±Ø³Ø§Ù„Ø©</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</th>
          <th>Ø­Ø°Ù</th>
        </tr>
      </thead>
      <tbody>
        <!-- Ù‡Ù†Ø§ ØªØ¸Ù‡Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© -->
        <tr>
          <td colspan="4" style="text-align: center;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script>
    const usersTableBody = document.querySelector("#usersTable tbody");
    const sentMessagesTableBody = document.querySelector("#sentMessagesTable tbody");
    const logoutBtn = document.getElementById('logoutBtn');
    const sendMessageBtn = document.getElementById('sendMessageBtn');
    const emailInput = document.getElementById('emailInput');
    const messageInput = document.getElementById('messageInput');
    const sendResponse = document.getElementById('sendResponse');

    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ¹Ø±Ø¶Ù‡Ø§
    async function loadUsers() {
      usersTableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;"><div class="loader" style="margin: 0 auto;"></div> Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</td></tr>';
      
      try {
        // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
        await new Promise(resolve => setTimeout(resolve, 800));
        
        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø³ØªØ£ØªÙŠ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…)
        const users = [
          { name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", email: "ahmed@example.com", phone: "0123456789", receivedAt: new Date().toISOString() },
          { name: "Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ", email: "sara@example.com", phone: "0111222333", receivedAt: new Date(Date.now() - 86400000).toISOString() },
          { name: "Ù…Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯", email: "mohamed@example.com", phone: "0105555666", receivedAt: new Date(Date.now() - 172800000).toISOString() }
        ];

        usersTableBody.innerHTML = '';
        users.forEach(user => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.phone}</td>
            <td>${new Date(user.receivedAt).toLocaleString('ar-EG')}</td>
            <td><button data-email="${user.email}">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>
          `;
          usersTableBody.appendChild(tr);
        });

        // Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø­Ø°Ù
        usersTableBody.querySelectorAll('button').forEach(btn => {
          btn.addEventListener('click', async () => {
            const emailToDelete = btn.getAttribute('data-email');
            if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${emailToDelete} ØŸ`)) return;

            // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            btn.innerHTML = '<div class="loader" style="display: inline-block; width: 15px; height: 15px; margin-left: 5px;"></div>';
            btn.disabled = true;

            try {
              // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
              await new Promise(resolve => setTimeout(resolve, 600));
              
              // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:
              // const res = await fetch(`/api/admin/user/${encodeURIComponent(emailToDelete)}`, {
              //   method: 'DELETE'
              // });
              // const data = await res.json();
              
              // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
              const data = { message: 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­' };
              
              alert(data.message);
              loadUsers();
            } catch {
              alert('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
              loadUsers();
            }
          });
        });

      } catch (error) {
        usersTableBody.innerHTML = '<tr><td colspan="5" class="error">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</td></tr>';
      }
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© ÙˆØ¹Ø±Ø¶Ù‡Ø§
    async function loadMessages() {
      sentMessagesTableBody.innerHTML = '<tr><td colspan="4" style="text-align: center;"><div class="loader" style="margin: 0 auto;"></div> Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...</td></tr>';
      
      try {
        // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
        await new Promise(resolve => setTimeout(resolve, 800));
        
        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø³ØªØ£ØªÙŠ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…)
        const messages = [
          { email: "ahmed@example.com", message: "Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§", sentAt: new Date().toISOString() },
          { email: "sara@example.com", message: "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ ÙˆØ³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ù‚Ø±ÙŠØ¨Ø§Ù‹", sentAt: new Date(Date.now() - 3600000).toISOString() }
        ];

        sentMessagesTableBody.innerHTML = '';
        messages.forEach(msg => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${msg.email}</td>
            <td>${msg.message}</td>
            <td>${new Date(msg.sentAt).toLocaleString('ar-EG')}</td>
            <td><button data-email="${msg.email}">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>
          `;
          sentMessagesTableBody.appendChild(tr);
        });

        // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø­Ø°Ù
        sentMessagesTableBody.querySelectorAll('button').forEach(btn => {
          btn.addEventListener('click', async () => {
            const emailToDelete = btn.getAttribute('data-email');
            if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø© Ø¥Ù„Ù‰: ${emailToDelete} ØŸ`)) return;

            // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            btn.innerHTML = '<div class="loader" style="display: inline-block; width: 15px; height: 15px; margin-left: 5px;"></div>';
            btn.disabled = true;

            try {
              // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
              await new Promise(resolve => setTimeout(resolve, 600));
              
              // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:
              // const res = await fetch('/api/admin/message', {
              //   method: 'DELETE',
              //   headers: { 'Content-Type': 'application/json' },
              //   body: JSON.stringify({ email: emailToDelete })
              // });
              // const data = await res.json();
              
              // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
              const data = { message: 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­' };
              
              alert(data.message);
              loadMessages();
            } catch {
              alert('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
              loadMessages();
            }
          });
        });

      } catch (error) {
        sentMessagesTableBody.innerHTML = '<tr><td colspan="4" class="error">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</td></tr>';
      }
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù…Ø³ØªØ®Ø¯Ù…
    sendMessageBtn.addEventListener('click', async () => {
      const email = emailInput.value.trim();
      const message = messageInput.value.trim();

      if (!email || !message) {
        sendResponse.textContent = 'ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø©';
        sendResponse.className = 'response error';
        return;
      }
      
      sendResponse.textContent = '';
      sendResponse.className = 'response';

      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
      sendMessageBtn.innerHTML = '<div class="loader" style="display: inline-block; width: 15px; height: 15px; margin-left: 5px;"></div> Ø¥Ø±Ø³Ø§Ù„...';
      sendMessageBtn.disabled = true;

      try {
        // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…
        await new Promise(resolve => setTimeout(resolve, 800));
        
        // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:
        // const res = await fetch('/api/admin/message', {
        //   method: 'POST',
        //   headers: { 'Content-Type': 'application/json' },
        //   body: JSON.stringify({ email, message })
        // });
        // const data = await res.json();
        
        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
        const data = { message: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­' };
        
        sendResponse.textContent = data.message;
        sendResponse.className = 'response success';
        emailInput.value = '';
        messageInput.value = '';
        
        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        loadMessages();
        
      } catch {
        sendResponse.textContent = 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
        sendResponse.className = 'response error';
      } finally {
        // Ø¥Ø¹Ø§Ø¯Ø© Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø­Ø§Ù„ØªÙ‡ Ø§Ù„Ø£ØµÙ„ÙŠØ©
        sendMessageBtn.innerHTML = 'Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©';
        sendMessageBtn.disabled = false;
      }
    });

    // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ø§Ø¯Ù…Ù†
    logoutBtn.addEventListener('click', async () => {
      // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± 3D Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
      logoutBtn.style.transform = 'rotateY(180deg) scale(0.95)';
      
      setTimeout(async () => {
        try {
          // Ù…Ø­Ø§ÙƒØ§Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
          await new Promise(resolve => setTimeout(resolve, 500));
          
          // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:
          // const res = await fetch('/api/admin/logout', { method: 'POST' });
          // if (res.ok) {
          //   window.location.href = '/admin-login.html';
          // } else {
          //   alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
          // }
          
          // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
          window.location.href = '/admin-login.html';
        } catch {
          alert('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
        }
      }, 300);
    });

    // ØªØ£Ø«ÙŠØ±Ø§Øª Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø¹Ù†Ø¯ ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…Ø§ÙˆØ³
    document.addEventListener('mousemove', (e) => {
      const cards = document.querySelectorAll('.card-3d');
      const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
      const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
      
      cards.forEach(card => {
        card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
      });
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        loadUsers();
        loadMessages();
      }, 500);
    });
  </script>
</body>

</html>
